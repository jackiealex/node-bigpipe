!function(){function e(t){var r=n[t],i="exports";return"object"==typeof r?r:(r[i]||(r[i]={},r[i]=r.call(r[i],e,r[i],r)||r[i]),r[i])}function t(e,t){n[e]=t}var n={};t("jquery",function(){return jQuery}),t("popup",function(e){function t(){this.destroyed=!1,this.__popup=n("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=n("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],r++}var n=e("jquery"),r=0,i=!("minWidth"in n("html")[0].style),s=!i;return n.extend(t.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(e){if(this.destroyed)return this;var r=this.__popup,o=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=e||this.follow,!this.__ready){if(r.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),i||n(window).on("resize",n.proxy(this.reset,this)),this.modal){var u={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||t.zIndex};r.addClass(this.className+"-modal"),s||n.extend(u,{position:"absolute",width:n(window).width()+"px",height:n(document).height()+"px"}),o.css(u).attr({tabindex:"0"}).on("focus",n.proxy(this.focus,this)),this.__mask=o.clone(!0).attr("style","").insertAfter(r),o.addClass(this.className+"-backdrop").insertBefore(r),this.__ready=!0}r.html()||r.html(this.innerHTML)}return r.addClass(this.className+"-show").show(),o.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(e){return!this.destroyed&&this.open&&(void 0!==e&&(this.returnValue=e),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),t.current===this&&(t.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),i||n(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var e in this)delete this[e];return this},reset:function(){var e=this.follow;return e?this.__follow(e):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var e=this.node,r=this.__popup,i=t.current,s=this.zIndex=t.zIndex++;if(i&&i!==this&&i.blur(!1),!n.contains(e,this.__getActive())){var o=r.find("[autofocus]")[0];!this._autofocus&&o?this._autofocus=!0:o=e,this.__focus(o)}return r.css("zIndex",s),t.current=this,r.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var e=this.__activeElement,t=arguments[0];return t!==!1&&this.__focus(e),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(e,t){return this.__getEventListener(e).push(t),this},removeEventListener:function(e,t){for(var n=this.__getEventListener(e),r=0;r<n.length;r++)t===n[r]&&n.splice(r--,1);return this},__getEventListener:function(e){var t=this.__listener;return t||(t=this.__listener={}),t[e]||(t[e]=[]),t[e]},__dispatchEvent:function(e){var t=this.__getEventListener(e);this["on"+e]&&this["on"+e]();for(var n=0;n<t.length;n++)t[n].call(this)},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,n=t&&t.activeElement||e;return n}catch(r){}},__center:function(){var e=this.__popup,t=n(window),r=n(document),i=this.fixed,s=i?0:r.scrollLeft(),o=i?0:r.scrollTop(),u=t.width(),a=t.height(),f=e.width(),l=e.height(),h=(u-f)/2+s,p=382*(a-l)/1e3+o,d=e[0].style;d.left=Math.max(parseInt(h),s)+"px",d.top=Math.max(parseInt(p),o)+"px"},__follow:function(e){var t=e.parentNode&&n(e),r=this.__popup;if(this.__followSkin&&r.removeClass(this.__followSkin),t){var i=t.offset();if(i.left*i.top<0)return this.__center()}var s=this,o=this.fixed,u=n(window),a=n(document),f=u.width(),l=u.height(),h=a.scrollLeft(),p=a.scrollTop(),d=r.width(),v=r.height(),m=t?t.outerWidth():0,g=t?t.outerHeight():0,y=this.__offset(e),b=y.left,w=y.top,E=o?b-h:b,S=o?w-p:w,x=o?0:h,T=o?0:p,N=x+f-d,C=T+l-v,k={},L=this.align.split(" "),A=this.className+"-",O={top:"bottom",bottom:"top",left:"right",right:"left"},M={top:"top",bottom:"top",left:"left",right:"left"},_=[{top:S-v,bottom:S+g,left:E-d,right:E+m},{top:S,bottom:S-v+g,left:E,right:E-d+m}],D={left:E+m/2-d/2,top:S+g/2-v/2},P={left:[x,N],top:[T,C]};n.each(L,function(e,t){_[e][t]>P[M[t]][1]&&(t=L[e]=O[t]),_[e][t]<P[M[t]][0]&&(L[e]=O[t])}),L[1]||(M[L[1]]="left"===M[L[0]]?"top":"left",_[1][L[1]]=D[M[L[1]]]),A+=L.join("-")+" "+this.className+"-follow",s.__followSkin=A,t&&r.addClass(A),k[M[L[0]]]=parseInt(_[0][L[0]]),k[M[L[1]]]=parseInt(_[1][L[1]]),r.css(k)},__offset:function(e){var t=e.parentNode,r=t?n(e).offset():{left:e.pageX,top:e.pageY};e=t?e:e.target;var i=e.ownerDocument,s=i.defaultView||i.parentWindow;if(s==window)return r;var o=s.frameElement,u=n(i),a=u.scrollLeft(),f=u.scrollTop(),l=n(o).offset(),h=l.left,p=l.top;return{left:r.left+h-a,top:r.top+p-f}}}),t.zIndex=1024,t.current=null,t}),t("dialog-config",{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'}),t("dialog",function(e){var t=e("jquery"),n=e("popup"),r=e("dialog-config"),i=r.cssUri;if(i){var s=e[e.toUrl?"toUrl":"resolve"];s&&(i=s(i),i='<link rel="stylesheet" href="'+i+'" />',t("base")[0]?t("base").before(i):t("head").append(i))}var o=0,u=new Date-0,a=!("minWidth"in t("html")[0].style),f="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),l=!a&&!f,c=function(e,n,r){var i=e=e||{};("string"==typeof e||1===e.nodeType)&&(e={content:e,fixed:!f}),e=t.extend(!0,{},c.defaults,e),e.original=i;var s=e.id=e.id||u+o,a=c.get(s);return a?a.focus():(l||(e.fixed=!1),e.quickClose&&(e.modal=!0,e.backdropOpacity=0),t.isArray(e.button)||(e.button=[]),void 0!==r&&(e.cancel=r),e.cancel&&e.button.push({id:"cancel",value:e.cancelValue,callback:e.cancel,display:e.cancelDisplay}),void 0!==n&&(e.ok=n),e.ok&&e.button.push({id:"ok",value:e.okValue,callback:e.ok,autofocus:!0}),c.list[s]=new c.create(e))},h=function(){};h.prototype=n.prototype;var p=c.prototype=new h;return c.create=function(e){var r=this;t.extend(this,new n);var i=(e.original,t(this.node).html(e.innerHTML)),s=t(this.backdrop);return this.options=e,this._popup=i,t.each(e,function(e,t){"function"==typeof r[e]?r[e](t):r[e]=t}),e.zIndex&&(n.zIndex=e.zIndex),i.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(e){r._trigger("cancel"),e.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),e.quickClose&&s.on("onmousedown"in document?"mousedown":"click",function(){return r._trigger("cancel"),!1}),this.addEventListener("show",function(){s.css({opacity:0,background:e.backdropBackground}).animate({opacity:e.backdropOpacity},150)}),this._esc=function(e){var t=e.target,i=t.nodeName,s=/^input|textarea$/i,o=n.current===r,u=e.keyCode;!o||s.test(i)&&"button"!==t.type||27===u&&r._trigger("cancel")},t(document).on("keydown",this._esc),this.addEventListener("remove",function(){t(document).off("keydown",this._esc),delete c.list[this.id]}),o++,c.oncreate(this),this},c.create.prototype=p,t.extend(p,{content:function(e){var n=this._$("content");return"object"==typeof e?(e=t(e),n.empty("").append(e.show()),this.addEventListener("beforeremove",function(){t("body").append(e.hide())})):n.html(e),this.reset()},title:function(e){return this._$("title").text(e),this._$("header")[e?"show":"hide"](),this},width:function(e){return this._$("content").css("width",e),this.reset()},height:function(e){return this._$("content").css("height",e),this.reset()},button:function(e){e=e||[];var n=this,r="",i=0;return this.callbacks={},"string"==typeof e?(r=e,i++):t.each(e,function(e,s){var o=s.id=s.id||s.value,u="";n.callbacks[o]=s.callback,s.display===!1?u=' style="display:none"':i++,r+='<button type="button" i-id="'+o+'"'+u+(s.disabled?" disabled":"")+(s.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+s.value+"</button>",n._$("button").on("click","[i-id="+o+"]",function(e){var r=t(this);r.attr("disabled")||n._trigger(o),e.preventDefault()})}),this._$("button").html(r),this._$("footer")[i?"show":"hide"](),this},statusbar:function(e){return this._$("statusbar").html(e)[e?"show":"hide"](),this},_$:function(e){return this._popup.find("[i="+e+"]")},_trigger:function(e){var t=this.callbacks[e];return"function"!=typeof t||t.call(this)!==!1?this.close().remove():this}}),c.oncreate=t.noop,c.getCurrent=function(){return n.current},c.get=function(e){return void 0===e?c.list:c.list[e]},c.list={},c.defaults=r,c}),window.dialog=e("dialog")}()