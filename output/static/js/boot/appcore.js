define(function(){function e(e){return e.replace(/^\/+|\/+$/g,"")}function t(e){this.options=_.extend({triggerSelector:".action-paresh",onChange:function(){},onHistoryChange:function(e){}},e),this._init()}return _.extend(t.prototype,{_init:function(){this._changePageEvent(),this._onLocationChange(location.pathname,!0)},_onLocationChange:function(e,t){var n={title:document.title,url:e,referer:e};t,this.options.onChange.call(null,n,t)},_changePageEvent:function(t){var n=this;$("body").on("click",this.options.triggerSelector,function(t){t.preventDefault();var r=$(this).attr("href")||$(this).data("url"),i=$(t.target).data("title")||document.title;r="/"+e(r);var s=location.href,o={title:i,url:r,referer:s};window.history.pushState(o,i,r),n.options.onChange.call(null,o)}),window.onpopstate=function(){n.options.onHistoryChange.apply(null,arguments)}}}),t})