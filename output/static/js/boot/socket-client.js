(function(){function e(e){dialog({title:"温馨提示",okValue:"刷新咯",cancelValue:"残忍拒绝",content:e.content||'<p style="text-align: center">亲，需要刷新你的浏览器<br />以便您获得最新体验</p>',ok:function(){return n.emit("request_reload"),window.location.reload(),!0},cancel:function(){return!0}}).showModal()}function t(e){dialog({title:"温馨提示",okValue:e.content?"知道了！":"呵呵",content:e.content||"服务器有个家伙点错，Ta可能想说什么？",ok:function(){return!0}}).showModal()}window.__getSocketSingleton__=function(){if(window.socket)return window.socket;var e=window.socket=io.connect("http://"+location.host,{transports:["websocket","flashsocket","htmlfile","xhr-polling","jsonp-polling"]});return e};var n=__getSocketSingleton__();return n.on("connect",function(){console.log("connected")}),n.on("disconnect",function(){console.log("disconnect")}),n.on("reload",function(){window.location.reload()}),n.on("push",function(n){switch(n.type){case"reload":e(n);break;default:t(n)}}),__getSocketSingleton__()})()