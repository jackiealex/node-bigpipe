define(function(){return function(t,n){var n=$.extend({selector:".recmd .btn-recommend"},n),r=['<div class="recommend">','   <div class="field">','      <p style="margin: 20px 0;">是否将此用户加入推荐列表，请选则推荐方案？</p>','      <div class="ui buttons resource-type">','          <div class="ui button" data-type="0">随机出现</div>','          <div class="or"></div>','          <div class="ui button" data-type="1">优先显示</div>','          <div class="or"></div>','          <div class="ui button" data-type="2">取消推荐</div>',"      </div>","   </div>","</div>"].join("");t.on("click",n.selector,function(e){var t=$(this),n=$(this).parents(".item").data("id")||$(this).data("id"),i=dialog({title:"加入推荐",align:"bottom left",quickClose:!0,content:_.template(r,{id:n}),ok:function(){var e=$(this.node).find(".buttons .positive").data("type");return $(this.node).find(".buttons .positive").length==0?(utils.bubble("你没选择推荐方案"),!1):(e==0||e==1?utils.api("/_bridge/admin/recommend/user/add",{method:"post",data:{id:n,level:e}}).done(function(e,n){if(e["node_code"]==2e4)return utils.bubble("添加成功"),t.removeClass("gift").addClass("red"),utils.bubble(e.data.msg)}):utils.api("/_bridge/admin/recommend/user/delete",{method:"post",data:{id:n},onError:function(e){e["node_code"]==1&&utils.bubble("用户此前并不在推荐列表中，操作失败")}}).done(function(e,t){e["node_code"]==2e4&&(utils.bubble("删除成功！"),_SmartPipe_.reload())}),!0)},okValue:"确定",cancelValue:"取消",cancel:function(){return!0}});return i.show(e.target),e.preventDefault(),e.stopPropagation(),!1})}})