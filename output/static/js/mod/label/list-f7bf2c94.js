define(function(){function t(t){t.on("click",".item .btn-edit",function(t){var n=$(this).data("id"),r=$(this).parents(".item"),i=r.find("h2 span").text(),s=r.find(".intro").text(),o=dialog({title:"修改标签",content:_.template(e,{name:i,intro:s}),okValue:"提交",cancelValue:"取消",cancel:function(){return!0},ok:function(){var e=$(this.node),t=e.find("textarea[name=intro]").val(),r=e.find("input[name=name]").val();if(!r)return utils.bubble("名称不能为空"),!1;if(!t)return utils.bubble("简介不能为空"),!1;utils.api("/_bridge/label/"+n,{method:"post",data:{name:r,intro:t}}).done(function(e,t){e["node_code"]==2e4&&(utils.bubble("已经更新"),_SmartPipe_.reload())})}});o.showModal()})}function n(e){e.on("click",".item .btn-delete",function(e){var t=$(this).data("id"),n=$(this).parents(".item"),r=n.find("h2 span").text(),i=dialog({title:"删除标签",content:'<div style="text-align: center; font-size: 20px; bold; padding: 40px  80px">#'+r+"</div>",okValue:"删除",cancelValue:"取消",cancel:function(){return!0},ok:function(){return utils.api("/_bridge/label/"+t,{method:"delete"}).done(function(e,t){e["node_code"]==2e4&&(utils.bubble("已经删除"),_SmartPipe_.reload())}),!0}});return i.showModal(),!1})}function r(e){e.on("keyup",".input input",function(e){var t=$(this).val(),n=$(this).parent().data("type"),r=$(this).next(),i="/label/search?type="+n+"&name="+t;$(this).next().data("url",i),e.keyCode==13&&r.trigger("click")})}function i(e){e.on("click",".input i",function(e){var t=$(this).prev().val();if(!t)return e.stopPropagation(),e.preventDefault(),!1})}function s(e){t(e),r(e),i(e),n(e)}var e=['<form action="/label/create" method="post" class="create-label">','<div class="ui warning form  ">','    <div class="row">','        <div class="ui icon input">','            <input type="text" name="name" placeholder="名称" value="<%= name %>">','            <i class="home icon"></i>',"        </div>","    </div>",'    <div class="row" style="margin-top: 16px">','        <div class="field">','            <textarea name="intro" placeholder="简介" cols="30" rows="10"><%= intro %></textarea>',"        </div>","    </div>","</div>","</form>"].join("");return{init:function(e){var t=$(".mod-label-list");s(t)}}})