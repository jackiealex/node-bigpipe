define(function(){function e(e){var t=e.find(".dnu-start"),n=e.find(".dnu-end");t.datetimepicker({format:"Y-m-d",lang:"ch",maxDate:utils.dateFormat(new Date,"/"),onShow:function(e){var t=n.val();this.setOptions({maxDate:t?utils.dateFormat(t,"/"):!1})},timepicker:!1}),n.datetimepicker({format:"Y-m-d",lang:"ch",minDate:!1,maxDate:utils.dateFormat(new Date,"/"),onChangeDateTime:function(){},onShow:function(e){var n=!1,r=t.val();this.setOptions({minDate:r?utils.dateFormat(r,"/"):!1})},timepicker:!1})}function t(e){e.on("click",".corner .remove",function(e){$(this).parents(".input").find("input").val("")})}function n(e){e.on("click",".btn-brush-delete",function(e){$.ajax({method:"DELETE",url:"/_bridge/brush/person?id="+$(this).attr("data"),data:{},beforeSend:function(){return $loading=utils.loading(),!0},success:function(e,t){e["node_code"]==2e4&&(utils.bubble("删除成功"),_SmartPipe_.reload(),$loading.remove())},error:function(){}})})}function r(e){var t=e.find(".dnu-start"),n=e.find(".dnu-end");e.on("click",".btn-date-click",function(e){var r=Date.parse(t.val()),i=Date.parse(n.val());if(!r&&!i)return utils.bubble("请选择至少一个日期");_SmartPipe_.location("/brush/person/list?"+$.param({start:r,end:i}))})}function i(i){e(i),t(i),r(i),n(i)}return{init:function(){var e=$(".mod-brushperson-list");i(e)}}})