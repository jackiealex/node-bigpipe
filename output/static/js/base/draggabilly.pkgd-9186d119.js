(function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function s(e,t){var s=n(e,t)?i:r;s(e,t)}var n,r,i;"classList"in document.documentElement?(n=function(e,t){return e.classList.contains(t)},r=function(e,t){e.classList.add(t)},i=function(e,t){e.classList.remove(t)}):(n=function(e,n){return t(n).test(e.className)},r=function(e,t){n(e,t)||(e.className=e.className+" "+t)},i=function(e,n){e.className=e.className.replace(t(n)," ")});var o={hasClass:n,addClass:r,removeClass:i,toggleClass:s,has:n,add:r,remove:i,toggle:s};typeof define=="function"&&define.amd?define("classie/classie",o):e.classie=o})(window),function(){function e(){}function n(e,t){var n=e.length;while(n--)if(e[n].listener===t)return n;return-1}function r(e){return function(){return this[e].apply(this,arguments)}}var t=e.prototype;t.getListeners=function(t){var n=this._getEvents(),r,i;if(typeof t=="object"){r={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(r[i]=n[i])}else r=n[t]||(n[t]=[]);return r},t.flattenListeners=function(t){var n=[],r;for(r=0;r<t.length;r+=1)n.push(t[r].listener);return n},t.getListenersAsObject=function(t){var n=this.getListeners(t),r;return n instanceof Array&&(r={},r[t]=n),r||n},t.addListener=function(t,r){var i=this.getListenersAsObject(t),s=typeof r=="object",o;for(o in i)i.hasOwnProperty(o)&&n(i[o],r)===-1&&i[o].push(s?r:{listener:r,once:!1});return this},t.on=r("addListener"),t.addOnceListener=function(t,n){return this.addListener(t,{listener:n,once:!0})},t.once=r("addOnceListener"),t.defineEvent=function(t){return this.getListeners(t),this},t.defineEvents=function(t){for(var n=0;n<t.length;n+=1)this.defineEvent(t[n]);return this},t.removeListener=function(t,r){var i=this.getListenersAsObject(t),s,o;for(o in i)i.hasOwnProperty(o)&&(s=n(i[o],r),s!==-1&&i[o].splice(s,1));return this},t.off=r("removeListener"),t.addListeners=function(t,n){return this.manipulateListeners(!1,t,n)},t.removeListeners=function(t,n){return this.manipulateListeners(!0,t,n)},t.manipulateListeners=function(t,n,r){var i,s,o=t?this.removeListener:this.addListener,u=t?this.removeListeners:this.addListeners;if(typeof n!="object"||n instanceof RegExp){i=r.length;while(i--)o.call(this,n,r[i])}else for(i in n)n.hasOwnProperty(i)&&(s=n[i])&&(typeof s=="function"?o.call(this,i,s):u.call(this,i,s));return this},t.removeEvent=function(t){var n=typeof t,r=this._getEvents(),i;if(n==="string")delete r[t];else if(n==="object")for(i in r)r.hasOwnProperty(i)&&t.test(i)&&delete r[i];else delete this._events;return this},t.emitEvent=function(t,n){var r=this.getListenersAsObject(t),i,s,o,u;for(o in r)if(r.hasOwnProperty(o)){s=r[o].length;while(s--)i=r[o][s],u=i.listener.apply(this,n||[]),(u===this._getOnceReturnValue()||i.once===!0)&&this.removeListener(t,i.listener)}return this},t.trigger=r("emitEvent"),t.emit=function(t){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,n)},t.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},t._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},t._getEvents=function(){return this._events||(this._events={})},typeof define=="function"&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):typeof module=="object"&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(t,n,r){t[n+r]=r.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,r.handleEvent.call(r,t)}:function(){var n=e.event;n.target=n.target||n.srcElement,r.call(t,n)},t.attachEvent("on"+n,t[n+r])});var r=function(){};t.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=undefined}});var i={bind:n,unbind:r};typeof define=="function"&&define.amd?define("eventie/eventie",i):e.eventie=i}(this),function(e){function r(e){if(!e)return;if(typeof n[e]=="string")return e;e=e.charAt(0).toUpperCase()+e.slice(1);var r;for(var i=0,s=t.length;i<s;i++){r=t[i]+e;if(typeof n[r]=="string")return r}}var t="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;typeof define=="function"&&define.amd?define("get-style-property/get-style-property",[],function(){return r}):e.getStyleProperty=r}(window),function(e,t){function i(e){var t=parseFloat(e),n=e.indexOf("%")===-1&&!isNaN(t);return n&&t}function o(){var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var t=0,n=s.length;t<n;t++){var r=s[t];e[r]=0}return e}function u(e){function u(e){typeof e=="string"&&(e=document.querySelector(e));if(!e||typeof e!="object"||!e.nodeType)return;var u=r(e);if(u.display==="none")return o();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;var f=a.isBorderBox=!!t&&!!u[t]&&u[t]==="border-box";for(var l=0,c=s.length;l<c;l++){var h=s[l],p=u[h],d=parseFloat(p);a[h]=isNaN(d)?0:d}var v=a.paddingLeft+a.paddingRight,m=a.paddingTop+a.paddingBottom,g=a.marginLeft+a.marginRight,y=a.marginTop+a.marginBottom,b=a.borderLeftWidth+a.borderRightWidth,w=a.borderTopWidth+a.borderBottomWidth,E=f&&n,S=i(u.width);S!==!1&&(a.width=S+(E?0:v+b));var x=i(u.height);return x!==!1&&(a.height=x+(E?0:m+w)),a.innerWidth=a.width-(v+b),a.innerHeight=a.height-(m+w),a.outerWidth=a.width+g,a.outerHeight=a.height+y,a}var t=e("boxSizing"),n;return function(){if(!t)return;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[t]="border-box";var s=document.body||document.documentElement;s.appendChild(e);var o=r(e);n=i(o.width)===200,s.removeChild(e)}(),u}var n=document.defaultView,r=n&&n.getComputedStyle?function(e){return n.getComputedStyle(e,null)}:function(e){return e.currentStyle},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];typeof define=="function"&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],u):e.getSize=u(e.getStyleProperty)}(window),function(e){function n(e,t){for(var n in t)e[n]=t[n];return e}function r(){}function p(i,u,a,l,c){function d(e,r){this.element=typeof e=="string"?t.querySelector(e):e,this.options=n({},this.options),n(this.options,r),this._create()}function v(){return!1}function y(e,t){e.x=t.pageX!==undefined?t.pageX:t.clientX,e.y=t.pageY!==undefined?t.pageY:t.clientY}function w(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}var h=l("transform"),p=!!l("perspective");n(d.prototype,u.prototype),d.prototype.options={},d.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=n({},this.position);var e=s(this.element);e.position!=="relative"&&e.position!=="absolute"&&(this.element.style.position="relative"),this.enable(),this.setHandles()},d.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles(!0)},d.prototype.bindHandles=function(t){var n;e.navigator.pointerEnabled?n=this.bindPointer:e.navigator.msPointerEnabled?n=this.bindMSPointer:n=this.bindMouseTouch,t=t===undefined?!0:!!t;for(var r=0,i=this.handles.length;r<i;r++){var s=this.handles[r];n.call(this,s,t)}},d.prototype.bindPointer=function(e,t){var n=t?"bind":"unbind";a[n](e,"pointerdown",this),e.style.touchAction=t?"none":""},d.prototype.bindMSPointer=function(e,t){var n=t?"bind":"unbind";a[n](e,"MSPointerDown",this),e.style.msTouchAction=t?"none":""},d.prototype.bindMouseTouch=function(e,t){var n=t?"bind":"unbind";a[n](e,"mousedown",this),a[n](e,"touchstart",this),t&&g(e)};var m="attachEvent"in t.documentElement,g=m?function(e){e.nodeName==="IMG"&&(e.ondragstart=v);var t=e.querySelectorAll("img");for(var n=0,r=t.length;n<r;n++){var i=t[n];i.ondragstart=v}}:r;d.prototype._getPosition=function(){var e=s(this.element),t=parseInt(e.left,10),n=parseInt(e.top,10);this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},d.prototype._addTransformPosition=function(e){if(!h)return;var t=e[h];if(t.indexOf("matrix")!==0)return;var n=t.split(","),r=t.indexOf("matrix3d")===0?12:4,i=parseInt(n[r],10),s=parseInt(n[r+1],10);this.position.x+=i,this.position.y+=s},d.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},d.prototype.getTouch=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.identifier===this.pointerIdentifier)return r}},d.prototype.onmousedown=function(e){var t=e.button;if(t&&t!==0&&t!==1)return;this.dragStart(e,e)},d.prototype.ontouchstart=function(e){if(this.isDragging)return;this.dragStart(e,e.changedTouches[0])},d.prototype.onMSPointerDown=d.prototype.onpointerdown=function(e){if(this.isDragging)return;this.dragStart(e,e)};var b={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};d.prototype.dragStart=function(n,r){if(!this.isEnabled)return;n.preventDefault?n.preventDefault():n.returnValue=!1,this.pointerIdentifier=r.pointerId!==undefined?r.pointerId:r.identifier,this._getPosition(),this.measureContainment(),y(this.startPoint,r),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this._bindEvents({events:b[n.type],node:n.preventDefault?e:t}),i.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,n,r]),this.animate()},d.prototype._bindEvents=function(e){for(var t=0,n=e.events.length;t<n;t++){var r=e.events[t];a.bind(e.node,r,this)}this._boundEvents=e},d.prototype._unbindEvents=function(){var e=this._boundEvents;if(!e||!e.events)return;for(var t=0,n=e.events.length;t<n;t++){var r=e.events[t];a.unbind(e.node,r,this)}delete this._boundEvents},d.prototype.measureContainment=function(){var e=this.options.containment;if(!e)return;this.size=c(this.element);var n=this.element.getBoundingClientRect(),r=o(e)?e:typeof e=="string"?t.querySelector(e):this.element.parentNode;this.containerSize=c(r);var i=r.getBoundingClientRect();this.relativeStartPosition={x:n.left-i.left,y:n.top-i.top}},d.prototype.onmousemove=function(e){this.dragMove(e,e)},d.prototype.onMSPointerMove=d.prototype.onpointermove=function(e){e.pointerId===this.pointerIdentifier&&this.dragMove(e,e)},d.prototype.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragMove(e,t)},d.prototype.dragMove=function(e,t){y(this.dragPoint,t);var n=this.dragPoint.x-this.startPoint.x,r=this.dragPoint.y-this.startPoint.y,i=this.options.grid,s=i&&i[0],o=i&&i[1];n=w(n,s),r=w(r,o),n=this.containDrag("x",n,s),r=this.containDrag("y",r,o),n=this.options.axis==="y"?0:n,r=this.options.axis==="x"?0:r,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+r,this.dragPoint.x=n,this.dragPoint.y=r,this.emitEvent("dragMove",[this,e,t])},d.prototype.containDrag=function(e,t,n){if(!this.options.containment)return t;var r=e==="x"?"width":"height",i=this.relativeStartPosition[e],s=w(-i,n,"ceil"),o=this.containerSize[r]-i-this.size[r];return o=w(o,n,"floor"),Math.min(o,Math.max(s,t))},d.prototype.onmouseup=function(e){this.dragEnd(e,e)},d.prototype.onMSPointerUp=d.prototype.onpointerup=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},d.prototype.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragEnd(e,t)},d.prototype.dragEnd=function(e,t){this.isDragging=!1,delete this.pointerIdentifier,h&&(this.element.style[h]="",this.setLeftTop()),this._unbindEvents(),i.remove(this.element,"is-dragging"),this.emitEvent("dragEnd",[this,e,t])},d.prototype.onMSPointerCancel=d.prototype.onpointercancel=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},d.prototype.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);this.dragEnd(e,t)},d.prototype.animate=function(){if(!this.isDragging)return;this.positionDrag();var e=this;f(function(){e.animate()})};var E=p?function(e,t){return"translate3d( "+e+"px, "+t+"px, 0)"}:function(e,t){return"translate( "+e+"px, "+t+"px)"};return d.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},d.prototype.positionDrag=h?function(){this.element.style[h]=E(this.dragPoint.x,this.dragPoint.y)}:d.prototype.setLeftTop,d.prototype.enable=function(){this.isEnabled=!0},d.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},d.prototype.destroy=function(){this.disable(),h&&(this.element.style[h]=""),this.element.style.left="",this.element.style.top="",this.element.style.position="",this.bindHandles(!1)},d}var t=e.document,i=t.defaultView,s=i&&i.getComputedStyle?function(e){return i.getComputedStyle(e,null)}:function(e){return e.currentStyle},o=typeof HTMLElement=="object"?function(t){return t instanceof HTMLElement}:function(t){return t&&typeof t=="object"&&t.nodeType===1&&typeof t.nodeName=="string"},u=0,a="webkit moz ms o".split(" "),f=e.requestAnimationFrame,l=e.cancelAnimationFrame,c;for(var h=0;h<a.length;h++){if(f&&l)break;c=a[h],f=f||e[c+"RequestAnimationFrame"],l=l||e[c+"CancelAnimationFrame"]||e[c+"CancelRequestAnimationFrame"]}if(!f||!l)f=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-u)),i=e.setTimeout(function(){t(n+r)},r);return u=n+r,i},l=function(t){e.clearTimeout(t)};typeof define=="function"&&define.amd?define(["classie/classie","eventEmitter/EventEmitter","eventie/eventie","get-style-property/get-style-property","get-size/get-size"],p):typeof exports=="object"?module.exports=p(require("desandro-classie"),require("wolfy87-eventemitter"),require("eventie"),require("desandro-get-style-property"),require("get-size")):e.Draggabilly=p(e.classie,e.EventEmitter,e.eventie,e.getStyleProperty,e.getSize)}(window)